// Generated with grunt. Do not edit!

"use strict";function isNumberInRange(a,b,c){return null!==a&&a>c?!1:null!==b&&c>b?!1:!0}angular.$=angular.element,angular.$.prototype.parent=function(a){if(!a)return angular.$(this[0].parentNode);for(var b,c=[].slice.call(document.querySelectorAll(a)),d=this[0];"HTML"!==d.nodeName;){d=d.parentNode;var e=c.indexOf(d);-1===e||(b=d,d=document.documentElement)}return angular.$(b)};var seroApp=angular.module("seroApp",["ngRoute","ngResource","ngAnimate","ui.bootstrap","seroApp.services","seroApp.directives","seroApp.controllers","pax.validations"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/home.html"}),a.when("/advanced1",{templateUrl:"partials/advanced.html"}),a.when("/advanced2",{templateUrl:"partials/advanced.html"}),a.when("/advanced3",{templateUrl:"partials/advanced.html"}),a.when("/advanced4",{templateUrl:"partials/advanced.html"}),a.when("/about",{templateUrl:"partials/about.html"}),a.when("/user",{templateUrl:"partials/user.html"}),a.when("/advanced/practitioners",{templateUrl:"partials/practitioners.html",controller:"PractitionersController"}),a.otherwise({redirectTo:"/"})}]);seroApp.controller("NavBarController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()},a.isAdvancedActive=function(a){return 0==b.path().indexOf(a)}}]);var vlists={},yearForValidPractitionerCertificate=2013;angular.module("seroApp.controllers",[]).controller("PractitionersController",["$scope","$filter","Practitioner","Valuelist","$animate",function(a,b,c,d){function e(a){_.forEach(a.practitioner_certificates,function(a){a.date_of_entry=new Date(a.date_of_entry)})}a.certificateYearMin=2e3,a.certificateYearMax=2015,a.current=null,a.currentForm=null,a.valuelists=d.get({id:"all"},function(){vlists=a.valuelists}),a.practitioners=c.query();var f=function(a,c,d){if(!a)return!1;var e=function(a){return a.cert_type!==c?!1:a.year!==d?!1:a.is_deleted?!1:a.is_cancelled?!1:!0};return b("filter")(a,e,!0).length>0};a.hasEia=function(a){var b=f(a.practitioner_certificates,10,yearForValidPractitionerCertificate);return a.cert_eia=b?"eia":null,b},a.hasAudit=function(a){var b=f(a.practitioner_certificates,12,yearForValidPractitionerCertificate);return a.cert_au=b?"audit":null,b},a.newPractitioner=function(){if(a.currentForm&&a.currentForm.$invalid)return void alert("Current form not valid. Can't create new practitioner.");var b={practitioner_certificates:[],is_new:!0},d=new c(b);a.practitioners.unshift(d),a.toggleRow(d)},a.deletePractitioner=function(b,c){a.current=null,c.is_new||c.$delete(),a.practitioners.splice(b,1)},a.deleteCertificate=function(a,b,c){c.is_new?b.practitioner_certificates.splice(a,1):c.is_deleted=!0},a.newCertificate=function(b){var c={year:yearForValidPractitionerCertificate,date_of_entry:new Date,is_new:!0};c.cert_no=a.certificateNumber(c),b.practitioner_certificates.unshift(c)},a.toggleRow=function(b){if(!a.loading){if(a.current){var c=a.current,d=a.currentForm;if(d.$invalid)return void alert("Form not valid. Can't save.");d.$dirty&&(c.is_new?c.$save({},function(a){e(a),g()}):c.$update({},function(a){e(a),g()}),d.$setPristine())}a.current==b?a.current=null:b.is_new?a.current=b:(a.loading=b,b.$get({},function(c){e(c),a.loading=null,a.current=b}))}},a.setCurrentForm=function(b){a.currentForm=b},a.certificateNumber=function(b){var c="E",d=_.find(a.valuelists.practitionertype,{id:b.cert_no});d&&(c=d.description1);var e="XXX",f=b.year.toString().substr(2),g="CC/"+c+"/"+e+"/"+f;return g},a.changeNumericBoolean=function(a){return 0===a?1:0};var g=function(){};a.practitionerOrderBy=function(a){var b=a.person.trim().substring(a.person.trim().lastIndexOf(" "));return b}}]).controller("DatePickerController",["$scope",function(a){a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.datepickerOptions={startingDay:1}}]);var directives=angular.module("seroApp.directives",[]).directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]);directives.directive("addPractitionerButton",["Practitioner",function(a){return{restrict:"A",link:function(b,c){c.bind("click",function(){var b=new a({person:"Gunnar Nymann",city:"Oslo"});b.$save()})}}}]),directives.directive("animateNewElement",["$animate",function(a){return function(b,c,d){b.$watch(d.animateNewElement,function(b){if(b===!0){console.log(c);var d="new-element";a.addClass(c,d,function(){a.removeClass(c,d)})}})}}]),directives.directive("hoverOnParent",[function(){return{restrict:"A",link:function(a,b,c){var d=c.hoverOnParent;b.parent(d).bind("mouseenter",function(){b.addClass("btn-link-hover")}),b.parent(d).bind("mouseleave",function(){b.removeClass("btn-link-hover")})}}}]);var version={version:"0.0.15"},services=angular.module("seroApp.services",[]).value("version",version.version);services.factory("Practitioner",["$resource",function(a){return a("/api/public/v1/practitioner/:id",{id:"@id"},{update:{method:"PUT",isArray:!1}})}]),services.factory("Valuelist",["$resource",function(a){return a("/api/public/v1/valuelist/:id",{id:"@id"})}]);var validations=angular.module("pax.validations",[]);validations.directive("decimal",function(){return{require:"ngModel",link:function(a,b,c,d){var e=c.min?parseFloat(c.min):null,f=c.max?parseFloat(c.max):null,g=c.decimal?"{0,"+parseInt(c.decimal)+"}":"+",h=c.negativeNumber?"\\-?":"",i=new RegExp("^"+h+"\\d+((\\.|\\,)\\d"+g+")?$");d.$parsers.unshift(function(a){if(null==a||""===a)return void d.$setValidity("float",!0);if(i.test(a)){var b=a;if("number"!=typeof a&&(b=parseFloat(a.replace(",","."))),isNumberInRange(e,f,b))return d.$setValidity("float",!0),b}return void d.$setValidity("float",!1)}),d.$formatters.push(function(a){if(null==a||""===a)return void d.$setValidity("float",!0);if(i.test(a)){var b=a;if("number"!=typeof a&&(b=parseFloat(a.replace(",","."))),isNumberInRange(e,f,b))return d.$setValidity("float",!0),b}return d.$setValidity("float",!1),a})}}}),validations.directive("integer",function(){return{require:"ngModel",link:function(a,b,c,d){var e=c.min?parseInt(c.min):null,f=c.max?parseInt(c.max):null,g=c.negativeNumber?"\\-?":"",h=new RegExp("^"+g+"\\d+$");d.$parsers.unshift(function(a){if(null==a||""===a)return void d.$setValidity("integer",!0);if(h.test(a)){var b=parseInt(a);if(isNumberInRange(e,f,b))return d.$setValidity("integer",!0),b}return void d.$setValidity("integer",!1)}),d.$formatters.push(function(a){if(null==a||""===a)return void d.$setValidity("integer",!0);if(h.test(a)){var b=parseInt(a);if(isNumberInRange(e,f,b))return d.$setValidity("integer",!0),b}return d.$setValidity("integer",!1),a})}}}),validations.directive("certificateNumber",function(){return{require:"ngModel",link:function(a,b,c,d){var e=new RegExp("^CC/(EIA|EA)/[0-9]{3}/[0-9]{2}$");d.$parsers.unshift(function(a){return null==a||""===a?void d.$setValidity("certificate-number",!0):e.test(a)?(d.$setValidity("certificate-number",!0),a):void d.$setValidity("certificate-number",!1)}),d.$formatters.push(function(a){return null==a||""===a?void d.$setValidity("certificate-number",!0):e.test(a)?(d.$setValidity("certificate-number",!0),a):(d.$setValidity("certificate-number",!1),a)})}}});